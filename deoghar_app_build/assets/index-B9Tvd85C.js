import{u as $,h as F,j as e,$ as I,e as A,C as M,_ as w}from"./index-DC7zYq7C.js";import{d as B,h as H,r as P}from"./router-CTqkcgir.js";import{u as L,o as U,F as V,S as T,c as W,a as r}from"./SelectField-DOpLesQ5.js";import{u as z}from"./useComonData-BrNJwSVy.js";import{R as i}from"./RHFTextField-CGc57oHr.js";import{B as _}from"./ButtonLoading-7gTo-ajp.js";import{R as G}from"./RotatingLoader-Dhdq7CXE.js";import{P as k}from"./index-CwIfpbj7.js";import{I as J}from"./Image-Dx5rng_b.js";import{C as K,b as O}from"./card-B4iR8Qem.js";import"./headlessui-BV7w-sRG.js";import"./axios-DmypytPv.js";import"./module-Dlq2V62o.js";const Q=W().shape({wardNo:r().required().label("Ward no"),holdingNo:r().required().label("Holding no"),consumerNo:r().required().label("Consumer no"),mobileNo:r().required().label("Mobile no"),Address:r().required().label("Address"),pinCode:r().required().label("Pin code")});function le(){var c,p,u,g,x;const{getAllUser:t}=z(),n=$({}),R=B(),{id:o}=H(),a=F({api:`${A.getConsumerDetailsById}/${o}`,options:{enabled:!!o}}),m=P.useMemo(()=>{var d,s,h,N,b,j,f,C,v,y,S,q;return{wardNo:String((s=(d=a==null?void 0:a.data)==null?void 0:d.data[0])==null?void 0:s.wardNo),holdingNo:String((N=(h=a==null?void 0:a.data)==null?void 0:h.data[0])==null?void 0:N.holdingNo)??"",consumerNo:String((j=(b=a==null?void 0:a.data)==null?void 0:b.data[0])==null?void 0:j.consumerNo)??"",mobileNo:String((C=(f=a==null?void 0:a.data)==null?void 0:f.data[0])==null?void 0:C.mobileNo)??"",Address:String((y=(v=a==null?void 0:a.data)==null?void 0:v.data[0])==null?void 0:y.Address)??"",pinCode:String((q=(S=a==null?void 0:a.data)==null?void 0:S.data[0])==null?void 0:q.pinCode)??""}},[(c=a==null?void 0:a.data)==null?void 0:c.data[0]]),l=L({resolver:U(Q),defaultValues:m});P.useEffect(()=>{var d;(d=a==null?void 0:a.data)!=null&&d.data[0]&&l.reset(m)},[(p=a==null?void 0:a.data)==null?void 0:p.data[0].id]);const E=async d=>{M("Are you sure?","Please confirm",async()=>{try{const s=await n.mutateAsync({api:A.postEditConsumerDetail,data:{address:d.Address,consumerId:o,mobileNo:d.mobileNo,name:d.consumerNo,holdingNo:d.holdingNo,consumerTypeId:"",demandFrom:"",pincode:d.pinCode,wardNo:d.wardNo}});s.data.status?(w.success(s.data.msg),R(`/deoghar-app/consumer-actions/${o}`)):w.error(s.data.msg)}catch{}})};return e.jsx(k,{title:"Update Consumer",children:e.jsxs("main",{className:"py-6 grid grid-cols-1 gap-4 px-4",children:[e.jsxs("div",{className:"flex space-x-3 items-center justify-start",children:[e.jsx(J,{src:"/assets/image/category.png",alt:"Update Consumer",className:"w-11 h-11 rounded-lg bg-gray-200 p-2"}),e.jsxs("div",{className:"",children:[e.jsx("h1",{className:"font-semibold",children:"Update Consumer"}),e.jsx("p",{className:"text-xs text-gray-500",children:"solid west management system"})]})]}),e.jsx(I,{}),e.jsx(K,{children:e.jsx(O,{children:e.jsx("div",{className:"p-4 md:p-5",children:a.isLoading?e.jsx("div",{className:"flex justify-center items-center h-[450px]",children:e.jsx(G,{})}):e.jsxs(V,{methods:l,onSubmit:l.handleSubmit(E),children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsx("div",{children:e.jsx(i,{name:"holdingNo",label:"Holding No",placeholder:"Enter Holding No",isRequired:!0})}),e.jsx("div",{children:e.jsx(T,{name:"wardNo",label:"Ward No",isRequired:!0,selectedText:"Select Ward No",data:((x=(g=(u=t==null?void 0:t.data)==null?void 0:u.data[0].ulbDetails[0])==null?void 0:g.wards)==null?void 0:x.map(d=>({label:String(d),value:String(d)})))??[]})}),e.jsx("div",{children:e.jsx(i,{disabled:!0,isRequired:!0,name:"consumerNo",label:"Consumer No",placeholder:"Enter Consumer No"})}),e.jsx("div",{children:e.jsx(i,{name:"mobileNo",label:"Mobile No",type:"number",isRequired:!0,placeholder:"Enter Mobile No",inputValidation:["mobile"]})}),e.jsx("div",{children:e.jsx(i,{name:"Address",label:"Address",placeholder:"Enter Address",isRequired:!0})}),e.jsx("div",{children:e.jsx(i,{name:"pinCode",label:"Pin Code",placeholder:"Enter Pin Code",isRequired:!0,inputValidation:["zip"]})})]}),e.jsx("div",{className:"flex justify-end gap-3 mt-6 mb-2",children:e.jsx(_,{isLoading:n.isPending,disabled:n.isPending,size:"sm",type:"submit",className:"w-20",children:"Update"})})]})})})})]})})}export{le as default};
